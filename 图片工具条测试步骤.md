# 图片操作工具条测试步骤

## 🧪 测试环境准备

1. 打开微信开发者工具
2. 加载项目
3. 进入布局拼图页面（pages/collage/collage）

## ✅ 测试用例

### 测试1: 工具条显示/隐藏

**步骤**:
1. 选择一个布局模板（例如：2张图片的布局）
2. 添加2张图片到槽位
3. 点击画布上的第一张图片

**预期结果**:
- ✅ 工具条在图片下方中央显示
- ✅ 工具条包含5个按钮：换一张、旋转、放大、缩小、删除
- ✅ 工具条有淡入动画效果

**步骤**:
4. 点击工具条外部区域（画布其他位置）

**预期结果**:
- ✅ 工具条消失

---

### 测试2: 换一张功能

**步骤**:
1. 点击画布上的图片，显示工具条
2. 点击"换一张"按钮
3. 从相册选择一张新图片

**预期结果**:
- ✅ 弹出图片选择器
- ✅ 选择新图片后，原位置的图片被替换
- ✅ 画布自动重新绘制
- ✅ 显示"图片已替换"提示

---

### 测试3: 旋转功能

**步骤**:
1. 点击画布上的图片，显示工具条
2. 点击"旋转"按钮
3. 多次点击旋转按钮

**预期结果**:
- ✅ 第1次点击：图片旋转90度，显示"旋转90°"
- ✅ 第2次点击：图片旋转180度，显示"旋转180°"
- ✅ 第3次点击：图片旋转270度，显示"旋转270°"
- ✅ 第4次点击：图片旋转360度（回到0度），显示"旋转0°"
- ✅ 画布实时更新显示旋转效果

---

### 测试4: 放大功能

**步骤**:
1. 点击画布上的图片，显示工具条
2. 连续点击"放大"按钮10次

**预期结果**:
- ✅ 每次点击图片放大10%
- ✅ 显示当前缩放百分比（110%、120%...200%）
- ✅ 达到200%后，继续点击不再放大
- ✅ 画布实时更新显示缩放效果

---

### 测试5: 缩小功能

**步骤**:
1. 点击画布上的图片，显示工具条
2. 连续点击"缩小"按钮5次

**预期结果**:
- ✅ 每次点击图片缩小10%
- ✅ 显示当前缩放百分比（90%、80%...50%）
- ✅ 达到50%后，继续点击不再缩小
- ✅ 画布实时更新显示缩放效果

---

### 测试6: 删除功能

**步骤**:
1. 点击画布上的图片，显示工具条
2. 点击"删除"按钮
3. 在确认对话框中点击"确定"

**预期结果**:
- ✅ 弹出确认对话框："确定要删除这张图片吗？"
- ✅ 点击确定后，图片被删除
- ✅ 槽位变为空槽位（显示+号）
- ✅ 显示"已删除"提示
- ✅ 画布自动重新绘制

**步骤**:
4. 再次点击删除按钮，在对话框中点击"取消"

**预期结果**:
- ✅ 图片不被删除
- ✅ 工具条保持显示

---

### 测试7: 组合操作

**步骤**:
1. 点击画布上的图片，显示工具条
2. 点击"旋转"按钮1次（90度）
3. 点击"放大"按钮3次（130%）
4. 关闭工具条
5. 再次点击同一张图片

**预期结果**:
- ✅ 图片保持旋转90度和130%缩放
- ✅ 工具条重新显示
- ✅ 可以继续调整

---

### 测试8: 导出功能

**步骤**:
1. 对一张图片进行旋转（90度）和放大（150%）
2. 点击"保存到相册"按钮
3. 查看保存的图片

**预期结果**:
- ✅ 导出的图片包含旋转效果
- ✅ 导出的图片包含缩放效果
- ✅ 导出效果与预览一致

---

### 测试9: 工具条位置自适应

**步骤**:
1. 选择一个布局，图片位于画布底部
2. 点击底部的图片

**预期结果**:
- ✅ 工具条显示在图片上方（因为下方空间不足）

**步骤**:
3. 选择一个布局，图片位于画布左侧
4. 点击左侧的图片

**预期结果**:
- ✅ 工具条不超出画布左边界

**步骤**:
5. 选择一个布局，图片位于画布右侧
6. 点击右侧的图片

**预期结果**:
- ✅ 工具条不超出画布右边界

---

### 测试10: 空槽位点击

**步骤**:
1. 选择一个4张图片的布局
2. 只添加2张图片
3. 点击空槽位

**预期结果**:
- ✅ 不显示工具条
- ✅ 弹出图片选择器，可以添加图片

---

### 测试11: 多图片操作

**步骤**:
1. 添加3张图片
2. 对第1张图片旋转90度
3. 对第2张图片放大150%
4. 对第3张图片缩小70%
5. 导出图片

**预期结果**:
- ✅ 每张图片的变换效果独立保存
- ✅ 导出的图片包含所有变换效果
- ✅ 各图片的效果互不影响

---

## 🐛 已知问题检查

- [ ] 工具条是否会超出画布边界？
- [ ] 快速点击是否会导致工具条闪烁？
- [ ] 旋转和缩放是否会影响其他图片？
- [ ] 导出的图片是否与预览一致？
- [ ] 删除图片后是否正确清理缩放和旋转数据？

## 📊 测试结果记录

| 测试用例 | 状态 | 备注 |
|---------|------|------|
| 测试1: 工具条显示/隐藏 | ⬜ 待测试 | |
| 测试2: 换一张功能 | ⬜ 待测试 | |
| 测试3: 旋转功能 | ⬜ 待测试 | |
| 测试4: 放大功能 | ⬜ 待测试 | |
| 测试5: 缩小功能 | ⬜ 待测试 | |
| 测试6: 删除功能 | ⬜ 待测试 | |
| 测试7: 组合操作 | ⬜ 待测试 | |
| 测试8: 导出功能 | ⬜ 待测试 | |
| 测试9: 工具条位置自适应 | ⬜ 待测试 | |
| 测试10: 空槽位点击 | ⬜ 待测试 | |
| 测试11: 多图片操作 | ⬜ 待测试 | |

## 🎯 测试完成标准

- ✅ 所有测试用例通过
- ✅ 无已知问题
- ✅ 用户体验流畅
- ✅ 导出功能正常

---

**测试人员**: ___________  
**测试日期**: ___________  
**测试版本**: v1.0.0

